/* General Styles for EPUB */
html {
  line-height: 1.2;
  font-family: 'Times New Roman', Times, serif;
  color: #1a1a1a;
}
p {
  text-indent: 0;
  margin: 1em 0;
  widows: 2;
  orphans: 2;
  text-align: justify;
  -epub-hyphens: auto;
  -webkit-hyphens: auto;
  -moz-hyphens: auto;
  hyphens: auto;
}
ol, ul { margin: 1em 0 0 1.7em; }
li > ol, li > ul { margin-top: 0; }
blockquote { margin: 1em 0 1em 1.7em; orphans: 2; widows: 2; }
blockquote > p:first-child {
  page-break-after: avoid;
  -webkit-column-break-after: avoid;
  -webkit-region-break-after: avoid;
}
code {
  font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
  font-size: 85%;
  margin: 0;
  hyphens: manual;
  white-space: pre-wrap;
}
pre { margin: 1em 0; }
pre code { padding: 0; overflow: visible; }
hr {
  background-color: #1a1a1a;
  border: none;
  height: 1px;
  margin: 1em 0;
}
table {
  margin: 1em 0;
  border-collapse: collapse;
  width: 100%;
}
table caption { margin-bottom: 0.75em; }
tbody {
  margin-top: 0.5em;
  border-top: 1px solid #1a1a1a;
  border-bottom: 1px solid #1a1a1a;
}
th, td { padding: 0.25em 0.5em; }
th { border-top: 1px solid #1a1a1a; }
header { margin-bottom: 4em; text-align: center; }
span.smallcaps { font-variant: small-caps; }
.display.math { display: block; text-align: center; margin: 0.5rem auto; }
a.footnote-ref { vertical-align: super; }
em, em em em, em em em em em { font-style: italic; }
em em, em em em em { font-style: normal; }
q { quotes: \"“\" \"”\" \"‘\" \"’\"; }

/* Images and captions */

img {
  width: 100%;
}
figure {
  margin: 1.5em auto;
  text-align: center;
}
figure img {
  display: block;
  margin: 0 auto;
}
figcaption {
  margin-top: 0.5em;
  font-size: 0.9em;
  font-style: italic;
  color: #666;
  text-align: center;
}

/* Headings */

h1 {
  /* margin: 3em 0 0 0; */
  font-size: 2em;
  line-height: 150%;
}
h2 {
  /* margin: 1.5em 0 0 0; */
  font-size: 1.5em;
  line-height: 135%;
}
h3 { margin: 1.3em 0 0 0; font-size: 1.3em; }
h4 { margin: 1.2em 0 0 0; font-size: 1.2em; }
h5 { margin: 1.1em 0 0 0; font-size: 1.1em; }
h6 { font-size: 1em; }
h1, h2, h3, h4, h5, h6 {
  text-indent: 0;
  text-align: left;
  font-weight: bold;
}

/* Title Page Styling */
section.titlepage {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  page-break-after: always;
  padding: 2em;
  box-sizing: border-box;
  overflow: hidden;
}

section.titlepage > * {
  max-width: 100%;
}

section.titlepage h1.main,
section.titlepage h1.subtitle {
  text-align: center;
  width: 100%;
  margin: 0;
  padding: 0;
  line-height: 1.2;
}

section.titlepage h1.main {
  font-size: 2.4em;
  font-weight: bold;
  margin-top: 2em;
  margin-bottom: 0.3em;
  text-decoration: underline;
}

section.titlepage h1.subtitle {
  font-size: 1.5em;
  font-weight: normal;
  margin-bottom: auto;
}

section.titlepage p.author {
  text-align: right;
  font-size: 1.1em;
  font-weight: bold;
  margin: 0 0 0.2em 0;
  padding: 0;
}

section.titlepage div.rights {
  text-align: right;
  font-size: 0.85em;
  color: #666;
  margin: 0 0 2em 0;
  padding: 0;
}

section.titlepage p.publisher {
  display: none;
}


/* section.titlepage {
  margin-top: 2em;
  margin-bottom: 2em;
  padding: 2em 0;
  page-break-after: always;
  text-align: center;
}
section.titlepage h1.main {
  font-size: 2.5em;
  font-weight: bold;
  margin-top: 2em;
  margin-bottom: 0.3em;
  text-decoration: underline;
}
section.titlepage h1.subtitle {
  font-size: 1.5em;
  font-weight: normal;
  margin-bottom: 1em;
}
section.titlepage p.author {
  text-align: right;
  font-size: 1.1em;
  font-weight: bold;
  margin: 0 0 0.2em 0;
  padding: 0;
}
section.titlepage div.rights {
  text-align: right;
  font-size: 0.85em;
  color: #666;
  margin: 0 0 2em 0;
  padding: 0;
}
section.titlepage p.publisher { display: none; } */

/* Chapter dates styling */
.chapter-dates {
  display: block;                 /* force block so breaks are honored */
  margin: 2em 0;
  page-break-after: always;       /* EPUB 2/3 */
}

/* Ensure inner paragraph doesn't override alignment */
.chapter-dates p {
  text-align: right;
  font-size: 0.85em;
  font-style: italic; 
  margin: 0; /* tighter spacing since container already has margins */
}

/* Thematic blocks (EPUB-safe): abstract, tip, quote, warning, success, details, music, define
   - Very light separation from content via thin lines
   - Caption above block, left-aligned, with a matching underline
   - Bottom line after block content
   - Simple Unicode icons (broad reader support), no masks/images
*/
.abstract, .tip, .quote, .warning, .success, .details, .music, .define {
  margin: 1em 0;
  padding: 0;             /* keep block tight; inner elements keep default margins */
  border: 0;              /* avoid borders; we use lines via pseudo-elements */
}

/* Generic caption: show when either caption or data-caption attribute is present */
.abstract[caption]::before,
.tip[caption]::before,
.quote[caption]::before,
.warning[caption]::before,
.success[caption]::before,
.details[caption]::before,
.music[caption]::before,
.define[caption]::before,
.abstract[data-caption]::before,
.tip[data-caption]::before,
.quote[data-caption]::before,
.warning[data-caption]::before,
.success[data-caption]::before,
.details[data-caption]::before,
.music[data-caption]::before,
.define[data-caption]::before {
  display: block;
  font-weight: bold;
  font-size: 1em;
  text-align: left;
  margin: 0.6em 0 0.25em 0;
  padding: 0; /* no extra padding for better compatibility */
  border-bottom: 1px solid #bbb;  /* color overridden per type below */
}

/* If no caption provided, still render the top line for separation */
.abstract:not([caption]):not([data-caption])::before,
.tip:not([caption]):not([data-caption])::before,
.quote:not([caption]):not([data-caption])::before,
.warning:not([caption]):not([data-caption])::before,
.success:not([caption]):not([data-caption])::before,
.details:not([caption]):not([data-caption])::before,
.music:not([caption]):not([data-caption])::before,
.define:not([caption]):not([data-caption])::before {
  content: "";
  display: block;
  border-bottom: 1px solid #bbb; /* default grey, overridden below */
  margin: 0.6em 0 0.25em 0;
}

/* Bottom line for all blocks */
.abstract::after,
.tip::after,
.quote::after,
.warning::after,
.success::after,
.details::after,
.music::after,
.define::after {
  content: "";
  display: block;
  border-top: 1px solid #bbb; /* overridden by type color */
  margin: 0.6em 0 0.4em 0;
}

/* --- Type-specific colors (no icons) --- */
/* abstract: light blue */
.abstract[caption]::before { content: attr(caption); color: rgb(2, 136, 209); }
.abstract[data-caption]::before { content: attr(data-caption); color: rgb(2, 136, 209); }
.abstract[caption]::before, .abstract[data-caption]::before, .abstract:not([caption]):not([data-caption])::before, .abstract::after { border-color: rgb(2, 136, 209); }

/* tip: teal */
.tip[caption]::before { content: attr(caption); color: rgb(0, 121, 107); }
.tip[data-caption]::before { content: attr(data-caption); color: rgb(0, 121, 107); }
.tip[caption]::before, .tip[data-caption]::before, .tip:not([caption]):not([data-caption])::before, .tip::after { border-color: rgb(0, 121, 107); }

/* quote: grey and italic content */
.quote { font-style: italic; }
.quote[caption]::before { content: attr(caption); color: #9e9e9e; }
.quote[data-caption]::before { content: attr(data-caption); color: #9e9e9e; }
.quote[caption]::before, .quote[data-caption]::before, .quote:not([caption]):not([data-caption])::before, .quote::after { border-color: #9e9e9e; }

/* warning: orange */
.warning[caption]::before { content: attr(caption); color: rgb(255, 145, 0); }
.warning[data-caption]::before { content: attr(data-caption); color: rgb(255, 145, 0); }
.warning[caption]::before, .warning[data-caption]::before, .warning:not([caption]):not([data-caption])::before, .warning::after { border-color: rgb(255, 145, 0); }

/* success: green */
.success[caption]::before { content: attr(caption); color: rgb(0, 200, 83); }
.success[data-caption]::before { content: attr(data-caption); color: rgb(0, 200, 83); }
.success[caption]::before, .success[data-caption]::before, .success:not([caption]):not([data-caption])::before, .success::after { border-color: rgb(0, 200, 83); }

/* details (example): deep purple */
.details[caption]::before { content: attr(caption); color: rgb(103, 58, 183); }
.details[data-caption]::before { content: attr(data-caption); color: rgb(103, 58, 183); }
.details[caption]::before, .details[data-caption]::before, .details:not([caption]):not([data-caption])::before, .details::after { border-color: rgb(103, 58, 183); }

/* music: red */
.music[caption]::before { content: attr(caption); color: rgb(194, 29, 29); }
.music[data-caption]::before { content: attr(data-caption); color: rgb(194, 29, 29); }
.music[caption]::before, .music[data-caption]::before, .music:not([caption]):not([data-caption])::before, .music::after { border-color: rgb(194, 29, 29); }

/* define: green (like success) */
.define[caption]::before { content: attr(caption); color: rgb(0, 200, 83); }
.define[data-caption]::before { content: attr(data-caption); color: rgb(0, 200, 83); }
.define[caption]::before, .define[data-caption]::before, .define:not([caption]):not([data-caption])::before, .define::after { border-color: rgb(0, 200, 83); }

/* Author signature: right-aligned, italic, spaced from text */
.author {
  display: block;
  text-align: right;
  font-style: italic;
  margin-top: 0.5em;
}

/* Keep link accent for anchors with class author (Apple Books/WebKit + fallbacks) */
a.author {
  display: block;            /* align like block signature when applied to <a> */
  text-align: right;
  font-style: italic;
  text-decoration: underline; /* ensure link look if reader suppresses default */
  color: #0645AD !important; /* force blue link color */
}
a.author:visited { 
  color: #0B0080 !important; /* force visited link color */
}

